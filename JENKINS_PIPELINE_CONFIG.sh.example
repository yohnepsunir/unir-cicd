#!/bin/bash
###############################################################################
#
# Configuración de variables para el Pipeline de Jenkins
# 
# Este archivo contiene todas las variables configurables del pipeline.
# Cópialo a una ubicación segura y úsalo como referencia.
#
###############################################################################

# ============================================================================
# 1. CONFIGURACIÓN DE EMAIL
# ============================================================================

# Email principal para notificaciones de fallo
NOTIFY_EMAIL="devops@example.com"

# Email adicionales (opcional)
NOTIFY_EMAIL_CC=""
NOTIFY_EMAIL_BCC=""

# ============================================================================
# 2. CONFIGURACIÓN SMTP
# ============================================================================

# Servidor SMTP
SMTP_SERVER="mail.example.com"

# Puerto SMTP (típicamente 25, 587 o 465)
SMTP_PORT="587"

# Usuario SMTP
SMTP_USER="jenkins@example.com"

# Contraseña SMTP (usar credenciales Jenkins, no aquí)
# SMTP_PASSWORD="[usar credenciales de Jenkins]"

# Usar TLS
SMTP_TLS="true"

# ============================================================================
# 3. CONFIGURACIÓN DE JENKINS
# ============================================================================

# URL base de Jenkins
JENKINS_URL="http://jenkins.example.com"

# Label del agente Docker
AGENT_LABEL="docker"

# Nombre del job
JOB_NAME="calculator-cicd"

# ============================================================================
# 4. CONFIGURACIÓN DE DOCKER
# ============================================================================

# Nombre de la imagen de la aplicación
APP_IMAGE_NAME="calculator-app"

# Nombre de la imagen del frontend
WEB_IMAGE_NAME="calc-web"

# Puerto de la API
API_PORT="5000"

# Puerto del Web
WEB_PORT="80"

# ============================================================================
# 5. CONFIGURACIÓN DE PRUEBAS
# ============================================================================

# Directorio de resultados
RESULTS_DIR="results"

# Timeout para tests (en minutos)
TEST_TIMEOUT="30"

# Timeout para E2E (en minutos, típicamente más largo)
E2E_TIMEOUT="60"

# ============================================================================
# 6. CONFIGURACIÓN DE NOTIFICACIONES (opcional)
# ============================================================================

# Enviar email si es exitoso
NOTIFY_SUCCESS="false"

# Enviar email si tiene warnings
NOTIFY_UNSTABLE="true"

# Enviar email si falla
NOTIFY_FAILURE="true"

# Incluir logs en el email
ATTACH_LOGS="false"

# Incluir archivos XML de pruebas
ATTACH_ARTIFACTS="true"

# ============================================================================
# 7. CONFIGURACIÓN DE LIMPIEZA
# ============================================================================

# Limpiar workspace después de exitoso
CLEAN_WORKSPACE_ON_SUCCESS="false"

# Limpiar resultados después de archivar
CLEAN_RESULTS="false"

# ============================================================================
# 8. CONFIGURACIÓN DE REPORTES
# ============================================================================

# Publicar reporte de cobertura
PUBLISH_COVERAGE="true"

# Publicar resultados de pruebas JUnit
PUBLISH_JUNIT="true"

# ============================================================================
# 9. CONFIGURACIÓN AVANZADA
# ============================================================================

# Número de builds a mantener en histórico
MAX_BUILDS="30"

# Número de días a mantener builds
KEEP_BUILDS_DAYS="30"

# URL del repositorio Git
GIT_REPOSITORY="https://github.com/srayuso/unir-test.git"

# Rama por defecto
GIT_BRANCH="*/master"

# ============================================================================
# CÓMO USAR ESTE ARCHIVO
# ============================================================================

# 1. Copiar este archivo:
#    cp JENKINS_PIPELINE_CONFIG.sh.example JENKINS_PIPELINE_CONFIG.sh
#
# 2. Editar con tus valores:
#    nano JENKINS_PIPELINE_CONFIG.sh
#
# 3. Usarlo en el Jenkinsfile:
#    source "${WORKSPACE}/JENKINS_PIPELINE_CONFIG.sh"
#
# 4. O usarlo localmente:
#    source JENKINS_PIPELINE_CONFIG.sh
#    echo "Email: $NOTIFY_EMAIL"
#    echo "SMTP: $SMTP_SERVER:$SMTP_PORT"
#
# ============================================================================

# Exportar variables para que estén disponibles en subshells
export NOTIFY_EMAIL
export NOTIFY_EMAIL_CC
export NOTIFY_EMAIL_BCC
export SMTP_SERVER
export SMTP_PORT
export SMTP_USER
export SMTP_TLS
export JENKINS_URL
export AGENT_LABEL
export JOB_NAME
export APP_IMAGE_NAME
export WEB_IMAGE_NAME
export API_PORT
export WEB_PORT
export RESULTS_DIR
export TEST_TIMEOUT
export E2E_TIMEOUT
export NOTIFY_SUCCESS
export NOTIFY_UNSTABLE
export NOTIFY_FAILURE
export ATTACH_LOGS
export ATTACH_ARTIFACTS
export CLEAN_WORKSPACE_ON_SUCCESS
export CLEAN_RESULTS
export PUBLISH_COVERAGE
export PUBLISH_JUNIT
export MAX_BUILDS
export KEEP_BUILDS_DAYS
export GIT_REPOSITORY
export GIT_BRANCH
